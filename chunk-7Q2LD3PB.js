import{b as u}from"./chunk-ABQXFKWW.js";import{a as p}from"./chunk-2NFLSA4Y.js";import{bootstrapApplication as $}from"@angular/platform-browser";import{provideBrowserGlobalErrorListeners as _,provideZonelessChangeDetection as M}from"@angular/core";import{provideRouter as k}from"@angular/router";import{provideHttpClient as O}from"@angular/common/http";import{provideAnimations as P}from"@angular/platform-browser/animations";var y=!0,x=y?"https://schools.buildaq.com/remoteEntry.json":"http://localhost:4201/remoteEntry.json",g=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"dashboard",loadComponent:()=>import("./chunk-3SC7YAMU.js").then(n=>n.DashboardComponent)},{path:"schools",loadChildren:()=>u({remoteEntry:x,exposedModule:"./SchoolsModule"}).then(n=>n.SchoolsModule).catch(n=>(console.error("Failed to load schools remote with Native Federation:",n),Promise.resolve([])))},{path:"**",redirectTo:"/dashboard"}];import{provideClientHydration as w,withEventReplay as L}from"@angular/platform-browser";var f={providers:[_(),M(),k(g),w(L()),O(),P()]};import{signal as F}from"@angular/core";import{RouterOutlet as E,RouterLink as j}from"@angular/router";import{CommonModule as I}from"@angular/common";import{Subject as A,takeUntil as T}from"rxjs";import*as e from"@angular/core";import{BehaviorSubject as S}from"rxjs";import*as h from"@angular/core";var l=class n{userContextSubject=new S(null);userContext$=this.userContextSubject.asObservable();constructor(){this.initializeUserContext()}async login(){try{let t={userId:"12345",email:"demo@buildaq.com",name:"Demo User",tenantId:"buildaq-demo",roles:["admin"]};this.userContextSubject.next(t),console.log("Mock login successful")}catch(t){throw console.error("Login failed:",t),t}}async logout(){try{this.userContextSubject.next(null),console.log("Logout successful")}catch(t){throw console.error("Logout failed:",t),t}}async getAccessToken(){return"mock-jwt-token"}getUserContext(){return this.userContextSubject.value}isAuthenticated(){return this.userContextSubject.value!==null}initializeUserContext(){console.log("Initializing auth context")}static \u0275fac=function(o){return new(o||n)};static \u0275prov=h.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})};import*as a from"@angular/core";import*as v from"@angular/common/http";import*as b from"@angular/router";var c=class n{constructor(t,o){this.http=t;this.router=o}remotes=new Map;async loadRemotes(){try{let t=await this.http.get("/assets/remotes.json").toPromise();if(t){for(let[o,i]of Object.entries(t))if(i.enabled){let r=this.getEnvironmentAwareConfig(i);await this.loadRemote(o,r)}}}catch(t){console.error("Failed to load remotes registry:",t)}}getEnvironmentAwareConfig(t){if(window.location.hostname==="localhost"){let o=p({},t);return t.url.includes("schools.buildaq.com")&&(o.url="http://localhost:4201/remoteEntry.js"),o}return t}async loadRemote(t,o){try{console.log(`Loading remote: ${t} from ${o.url}`),this.remotes.set(t,{config:o}),console.log(`Successfully configured remote: ${t}`)}catch(i){console.error(`Failed to load remote ${t}:`,i),this.handleRemoteLoadError(t,i)}}handleRemoteLoadError(t,o){console.error(`Remote ${t} failed to load:`,o)}getRemote(t){return this.remotes.get(t)}getLoadedRemotes(){return Array.from(this.remotes.keys())}static \u0275fac=function(o){return new(o||n)(a.\u0275\u0275inject(v.HttpClient),a.\u0275\u0275inject(b.Router))};static \u0275prov=a.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})};import*as C from"@angular/common";function z(n,t){if(n&1){let o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",20),e.\u0275\u0275text(1),e.\u0275\u0275elementStart(2,"button",21),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(o);let r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.logout())}),e.\u0275\u0275text(3,"Logout"),e.\u0275\u0275elementEnd()()}if(n&2){let o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" Welcome, ",o.userContext.name,"! ")}}function U(n,t){if(n&1){let o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"button",22),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(o);let r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.login())}),e.\u0275\u0275text(2,"\u{1F510} Login"),e.\u0275\u0275elementEnd()()}}var m=class n{constructor(t,o){this.authService=t;this.remoteLoader=o}destroy$=new A;userContext=null;isMobileMenuOpen=!1;ngOnInit(){this.authService.userContext$.pipe(T(this.destroy$)).subscribe(t=>{this.userContext=t,t&&this.loadRemoteApplications()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}async login(){try{await this.authService.login()}catch(t){console.error("Login failed:",t)}}async logout(){try{await this.authService.logout()}catch(t){console.error("Logout failed:",t)}}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}closeMobileMenu(){this.isMobileMenuOpen=!1}handleEscapeKey(){this.closeMobileMenu()}async loadRemoteApplications(){try{await this.remoteLoader.loadRemotes(),console.log("Remote applications loaded")}catch(t){console.error("Failed to load remote applications:",t)}}static \u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(l),e.\u0275\u0275directiveInject(c))};static \u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-layout"]],hostBindings:function(o,i){o&1&&e.\u0275\u0275listener("keydown.escape",function(){return i.handleEscapeKey()},e.\u0275\u0275resolveDocument)},decls:30,vars:6,consts:[[1,"layout"],[1,"header"],[1,"header-container"],[1,"logo"],[1,"mobile-menu-toggle",3,"click"],[1,"hamburger-line"],[1,"logo-text"],[1,"header-actions"],["class","user-info",4,"ngIf"],[4,"ngIf"],[1,"mobile-overlay",3,"click"],[1,"sidebar"],[1,"nav-items"],["routerLink","/dashboard",1,"nav-item",3,"click"],["routerLink","/schools",1,"nav-item",3,"click"],["routerLink","/schools/students",1,"nav-item",3,"click"],[1,"nav-section"],["routerLink","/schools",1,"nav-item","sub-item",3,"click"],["routerLink","/schools/students",1,"nav-item","sub-item",3,"click"],[1,"content"],[1,"user-info"],[1,"btn-logout",3,"click"],[1,"btn-login",3,"click"]],template:function(o,i){o&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"button",4),e.\u0275\u0275listener("click",function(){return i.toggleMobileMenu()}),e.\u0275\u0275element(5,"span",5)(6,"span",5)(7,"span",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"span",6),e.\u0275\u0275text(9,"BuildAQ Shell"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"div",7),e.\u0275\u0275template(11,z,4,1,"div",8)(12,U,3,0,"div",9),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(13,"div",10),e.\u0275\u0275listener("click",function(){return i.closeMobileMenu()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"nav",11)(15,"div",12)(16,"a",13),e.\u0275\u0275listener("click",function(){return i.closeMobileMenu()}),e.\u0275\u0275text(17,"\u{1F3E0} Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"a",14),e.\u0275\u0275listener("click",function(){return i.closeMobileMenu()}),e.\u0275\u0275text(19,"\u{1F3EB} Schools"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"a",15),e.\u0275\u0275listener("click",function(){return i.closeMobileMenu()}),e.\u0275\u0275text(21,"\u{1F468}\u200D\u{1F393} Students"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",16),e.\u0275\u0275text(23,"Remote Apps"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"a",17),e.\u0275\u0275listener("click",function(){return i.closeMobileMenu()}),e.\u0275\u0275text(25,"\u{1F4DA} School Management"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"a",18),e.\u0275\u0275listener("click",function(){return i.closeMobileMenu()}),e.\u0275\u0275text(27,"\u{1F465} Student Directory"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(28,"main",19),e.\u0275\u0275element(29,"router-outlet"),e.\u0275\u0275elementEnd()()),o&2&&(e.\u0275\u0275advance(11),e.\u0275\u0275property("ngIf",i.userContext),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!i.userContext),e.\u0275\u0275advance(),e.\u0275\u0275classProp("active",i.isMobileMenuOpen),e.\u0275\u0275advance(),e.\u0275\u0275classProp("open",i.isMobileMenuOpen))},dependencies:[I,C.NgIf,E,j],styles:[".layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh}.header[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid #e4e9f0;z-index:1000;position:fixed;top:0;left:0;right:0;height:60px}.header-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:0 1rem;height:100%;max-width:100%}.logo[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.25rem;font-weight:600;color:#2a2a2a}.logo-text[_ngcontent-%COMP%]{margin-left:.5rem}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-size:.875rem;color:#666}.btn-logout[_ngcontent-%COMP%], .btn-login[_ngcontent-%COMP%]{background:#007bff;color:#fff;border:none;padding:.5rem 1rem;border-radius:4px;cursor:pointer;font-size:.875rem}.btn-logout[_ngcontent-%COMP%]:hover, .btn-login[_ngcontent-%COMP%]:hover{background:#0056b3}.sidebar[_ngcontent-%COMP%]{position:fixed;left:0;top:60px;bottom:0;width:250px;background-color:#f8f9fa;border-right:1px solid #e4e9f0;padding:1rem 0;overflow-y:auto}.nav-items[_ngcontent-%COMP%]{display:flex;flex-direction:column}.nav-item[_ngcontent-%COMP%]{display:block;padding:.75rem 1rem;color:#495057;text-decoration:none;border-bottom:1px solid #e4e9f0;transition:background-color .2s}.nav-item[_ngcontent-%COMP%]:hover{background-color:#e9ecef;color:#007bff}.nav-section[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.75rem;font-weight:600;text-transform:uppercase;color:#6c757d;background-color:#e9ecef}.sub-item[_ngcontent-%COMP%]{padding-left:2rem;font-size:.875rem}.content[_ngcontent-%COMP%]{margin-left:250px;margin-top:60px;padding:2rem;min-height:calc(100vh - 60px);background-color:#f8f9fa}@media (max-width: 768px){.header-container[_ngcontent-%COMP%]{padding:0 1rem}.logo-text[_ngcontent-%COMP%]{font-size:1rem}.sidebar[_ngcontent-%COMP%]{transform:translate(-100%);transition:transform .3s ease;z-index:1001}.sidebar.open[_ngcontent-%COMP%]{transform:translate(0)}.content[_ngcontent-%COMP%]{margin-left:0;padding:1rem}.nav-item[_ngcontent-%COMP%]{padding:1rem;font-size:.9rem}.user-info[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem;align-items:flex-end;font-size:.8rem}}.mobile-menu-toggle[_ngcontent-%COMP%]{display:none;background:none;border:none;cursor:pointer;padding:.25rem;border-radius:4px;flex-direction:column;justify-content:space-around;width:32px;height:32px;transition:all .3s ease}.mobile-menu-toggle[_ngcontent-%COMP%]:hover{background-color:#0000000d}.hamburger-line[_ngcontent-%COMP%]{display:block;height:3px;width:20px;background-color:#333;border-radius:1px;transition:all .3s ease}.mobile-overlay[_ngcontent-%COMP%]{display:none;position:fixed;top:60px;left:0;width:100%;height:calc(100vh - 60px);background:#00000080;z-index:1000;opacity:0;transition:opacity .3s ease}.mobile-overlay.active[_ngcontent-%COMP%]{display:block;opacity:1}@media (max-width: 768px){.mobile-menu-toggle[_ngcontent-%COMP%]{display:flex}.sidebar[_ngcontent-%COMP%]{transform:translate(-100%);transition:transform .3s ease;z-index:1001;box-shadow:2px 0 5px #0000001a}.sidebar.open[_ngcontent-%COMP%]{transform:translate(0)}}"]})};import*as s from"@angular/core";var d=class n{title=F("buildaq-shell");static \u0275fac=function(o){return new(o||n)};static \u0275cmp=s.\u0275\u0275defineComponent({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(o,i){o&1&&s.\u0275\u0275element(0,"app-layout")},dependencies:[m],encapsulation:2})};$(d,f).catch(n=>console.error(n));
